"use strict";function distinct(t,e){return this.lift(new DistinctOperator(t,e))}var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult"),Set_1=require("../util/Set");exports.distinct=distinct;var DistinctOperator=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new DistinctSubscriber(t,this.keySelector,this.flushes))},t}(),DistinctSubscriber=function(t){function e(e,i,r){t.call(this,e),this.keySelector=i,this.values=new Set_1.Set,r&&this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends(e,t),e.prototype.notifyNext=function(t,e,i,r,s){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,i=this.destination;try{e=this.keySelector(t)}catch(t){return void i.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var i=this.values;i.has(t)||(i.add(t),this.destination.next(e))},e}(OuterSubscriber_1.OuterSubscriber);exports.DistinctSubscriber=DistinctSubscriber;
"use strict";function bufferCount(t,r){return void 0===r&&(r=null),this.lift(new BufferCountOperator(t,r))}var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},Subscriber_1=require("../Subscriber");exports.bufferCount=bufferCount;var BufferCountOperator=function(){function t(t,r){this.bufferSize=t,this.startBufferEvery=r}return t.prototype.call=function(t,r){return r.subscribe(new BufferCountSubscriber(t,this.bufferSize,this.startBufferEvery))},t}(),BufferCountSubscriber=function(t){function r(r,e,n){t.call(this,r),this.bufferSize=e,this.startBufferEvery=n,this.buffers=[],this.count=0}return __extends(r,t),r.prototype._next=function(t){var r=this.count++,e=this,n=e.destination,u=e.bufferSize,f=e.startBufferEvery,i=e.buffers,o=null==f?u:f;r%o===0&&i.push([]);for(var s=i.length;s--;){var c=i[s];c.push(t),c.length===u&&(i.splice(s,1),n.next(c))}},r.prototype._complete=function(){for(var r=this.destination,e=this.buffers;e.length>0;){var n=e.shift();n.length>0&&r.next(n)}t.prototype._complete.call(this)},r}(Subscriber_1.Subscriber);
"use strict";function isNodeStyleEventEmmitter(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}function isJQueryStyleEventEmitter(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}function isNodeList(t){return!!t&&"[object NodeList]"===toString.call(t)}function isHTMLCollection(t){return!!t&&"[object HTMLCollection]"===toString.call(t)}function isEventTarget(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Observable_1=require("../Observable"),tryCatch_1=require("../util/tryCatch"),isFunction_1=require("../util/isFunction"),errorObject_1=require("../util/errorObject"),Subscription_1=require("../Subscription"),toString=Object.prototype.toString,FromEventObservable=function(t){function e(e,r,n,i){t.call(this),this.sourceObj=e,this.eventName=r,this.selector=n,this.options=i}return __extends(e,t),e.create=function(t,r,n,i){return isFunction_1.isFunction(n)&&(i=n,n=void 0),new e(t,r,i,n)},e.setupSubscription=function(t,r,n,i,o){var s;if(isNodeList(t)||isHTMLCollection(t))for(var c=0,u=t.length;c<u;c++)e.setupSubscription(t[c],r,n,i,o);else if(isEventTarget(t)){var f=t;t.addEventListener(r,n,o),s=function(){return f.removeEventListener(r,n)}}else if(isJQueryStyleEventEmitter(t)){var v=t;t.on(r,n),s=function(){return v.off(r,n)}}else{if(!isNodeStyleEventEmmitter(t))throw new TypeError("Invalid event target");var a=t;t.addListener(r,n),s=function(){return a.removeListener(r,n)}}i.add(new Subscription_1.Subscription(s))},e.prototype._subscribe=function(t){var r=this.sourceObj,n=this.eventName,i=this.options,o=this.selector,s=o?function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=tryCatch_1.tryCatch(o).apply(void 0,e);n===errorObject_1.errorObject?t.error(errorObject_1.errorObject.e):t.next(n)}:function(e){return t.next(e)};e.setupSubscription(r,n,s,t,i)},e}(Observable_1.Observable);exports.FromEventObservable=FromEventObservable;